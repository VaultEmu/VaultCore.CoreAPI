<?xml version="1.0"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <EnableDynamicLoading>true</EnableDynamicLoading>
    </PropertyGroup>
    
    <UsingTask TaskName="VaultCore.BuildTasks.JsonManifestGenerationBuildTask"
               AssemblyFile="$(MSBuildThisFileDirectory)..\build\VaultCore.BuildTaskLib.dll"/>

    <Target Name="Create Json Manifest" AfterTargets="AfterBuild">
        <JsonManifestGenerationBuildTask DllPath="$(TargetPath)" ManifestOutputPath="$(IntermediateOutputPath)$(TargetName)_Manifest.json"/>
        <ItemGroup>
            <None Include="$(IntermediateOutputPath)$(TargetName)_Manifest.json" TargetPath="$(TargetName)_Manifest.json" CopyToOutputDirectory="Always"/>
        </ItemGroup>
    </Target>
</Project>